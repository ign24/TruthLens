import{d as j,c as r,h as w,a as e,F as _,i as h,t as p,n as k,j as f,o as i,e as A,T as B,w as F,g as C,r as m,k as L,l as P,m as M,p as V,v as O,f as D,b as S,u as I}from"./index-yMFJ6_hg.js";import{g as $,c as H,C as U}from"./ChatBot-BWCZwB6P.js";const Y={class:"space-y-6"},q={key:0,class:"space-y-3"},J={class:"space-y-2"},Z={class:"flex items-center justify-between"},R={class:"text-sm text-slate-300 capitalize"},G={class:"text-sm text-slate-400"},W={class:"h-2 w-full rounded-full bg-slate-800/20 overflow-hidden"},K={key:1,class:"space-y-3"},Q={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},X={class:"text-sm font-medium text-slate-200 capitalize"},ee={class:"w-full h-1.5 rounded-full bg-slate-800/20 overflow-hidden"},te={class:"text-xs text-slate-400"},ae=j({__name:"AnalysisDetails",props:{articleType:{},sentiments:{}},setup(b){const c={objective:{gradient:"bg-gradient-to-r from-green-400 to-green-600",bg:"bg-green-400/10"},subjective:{gradient:"bg-gradient-to-r from-yellow-400 to-yellow-600",bg:"bg-yellow-400/10"},speculative:{gradient:"bg-gradient-to-r from-orange-400 to-orange-600",bg:"bg-orange-400/10"},emotive:{gradient:"bg-gradient-to-r from-red-400 to-red-600",bg:"bg-red-400/10"},clickbait:{gradient:"bg-gradient-to-r from-purple-400 to-purple-600",bg:"bg-purple-400/10"},joy:{gradient:"bg-gradient-to-r from-green-400 to-green-600",bg:"bg-green-400/10"},trust:{gradient:"bg-gradient-to-r from-blue-400 to-blue-600",bg:"bg-blue-400/10"},fear:{gradient:"bg-gradient-to-r from-purple-400 to-purple-600",bg:"bg-purple-400/10"},surprise:{gradient:"bg-gradient-to-r from-yellow-400 to-yellow-600",bg:"bg-yellow-400/10"},sadness:{gradient:"bg-gradient-to-r from-gray-400 to-gray-600",bg:"bg-gray-400/10"},disgust:{gradient:"bg-gradient-to-r from-red-400 to-red-600",bg:"bg-red-400/10"},anger:{gradient:"bg-gradient-to-r from-orange-400 to-orange-600",bg:"bg-orange-400/10"},anticipation:{gradient:"bg-gradient-to-r from-pink-400 to-pink-600",bg:"bg-pink-400/10"}};function l(n,a){var s;return((s=c[n])==null?void 0:s[a])||(a==="gradient"?"bg-gradient-to-r from-slate-400 to-slate-600":"bg-slate-400/10")}return(n,a)=>(i(),r("div",Y,[n.articleType?(i(),r("div",q,[a[0]||(a[0]=e("h3",{class:"text-lg font-semibold text-blue-300"},"Article Type Distribution",-1)),e("div",J,[(i(!0),r(_,null,h(n.articleType,(s,o)=>(i(),r("div",{key:o,class:"flex flex-col gap-1"},[e("div",Z,[e("span",R,p(o),1),e("span",G,p((s*100).toFixed(0))+"%",1)]),e("div",W,[e("div",{class:f(["h-full rounded-full transition-all duration-500",l(o,"gradient")]),style:k({width:`${s*100}%`})},null,6)])]))),128))])])):w("",!0),n.sentiments?(i(),r("div",K,[a[1]||(a[1]=e("h3",{class:"text-lg font-semibold text-blue-300"},"Emotional Analysis",-1)),e("div",Q,[(i(!0),r(_,null,h(n.sentiments,(s,o)=>(i(),r("div",{key:o,class:"flex flex-col items-center gap-2 p-3 rounded-lg bg-slate-800/20 border border-white/5 hover:border-white/10 transition-all duration-300"},[e("span",X,p(o),1),e("div",ee,[e("div",{class:f(["h-full rounded-full transition-all duration-500",l(o,"gradient")]),style:k({width:`${s*100}%`})},null,6)]),e("span",te,p((s*100).toFixed(0))+"%",1)]))),128))])])):w("",!0)]))}}),se={class:"space-y-4 text-white group"},oe={class:"mt-6 p-6 rounded-xl bg-slate-900/95 backdrop-blur-sm border border-white/10 shadow-[inset_0_2px_4px_0_rgba(0,0,0,0.3),inset_0_0_0_1px_rgba(255,255,255,0.1)] text-white space-y-3 relative group"},ne={class:"space-y-4"},ie={class:"flex items-center gap-2 mb-2 group/bias"},le={class:"text-white/90 transition-all duration-300 group-hover/bias:text-white group-hover/bias:translate-x-1"},re={class:"flex flex-col gap-2 mb-4"},de={class:"flex h-4 w-full rounded-full overflow-hidden bg-slate-900/20 backdrop-blur-sm border border-white/5 group/heatmap hover:border-white/10 transition-all duration-300"},ce={class:"flex justify-between text-xs text-slate-400/80"},ue={class:"transition-all duration-300 group-hover/indicator:text-white/90 group-hover/indicator:translate-x-0.5"},pe=j({__name:"AnalysisVisual",props:{blocks:{}},setup(b){const c=b;function l(a){return Object.entries(a).reduce((s,[o,g])=>g>a[s]?o:s,Object.keys(a)[0])}function n(a){return`bg-gradient-to-r ${a==="objective"?"from-green-400 to-green-600":a==="subjective"?"from-yellow-400 to-yellow-600":a==="speculative"?"from-orange-400 to-orange-600":a==="emotive"?"from-red-400 to-red-600":a==="clickbait"?"from-purple-400 to-purple-600":"from-slate-400 to-slate-600"}`}return(a,s)=>(i(),r("div",se,[e("div",oe,[s[2]||(s[2]=e("div",{class:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-xl pointer-events-none"},null,-1)),e("div",ne,[A(B,{name:"block",tag:"div",class:"space-y-4"},{default:F(()=>[(i(!0),r(_,null,h(c.blocks,(o,g)=>(i(),r("div",{key:g,class:f(["p-4 rounded-lg border border-white/5 backdrop-blur-sm transition-all duration-300 ease-in-out","hover:scale-[1.01] hover:border-white/10 hover:shadow-[0_8px_32px_0_rgba(0,0,0,0.15)]","group/block relative","bg-slate-900/95 text-white"]),style:k({animationDelay:`${g*100}ms`})},[e("div",ie,[s[0]||(s[0]=e("span",{class:"font-semibold text-blue-300 transition-colors duration-300 group-hover/bias:text-blue-200"},"Predominant Style:",-1)),e("span",le,p(l(o.style_distribution)),1)]),e("div",re,[e("div",de,[(i(!0),r(_,null,h(o.style_distribution,(v,u,E)=>(i(),r("div",{key:u,style:k({width:v*100+"%",marginLeft:E===0?"0":"-1px"}),class:f([[n(u),"transition-all duration-500 ease-in-out relative group/segment"],"h-full"])},s[1]||(s[1]=[e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/segment:opacity-100 transition-opacity duration-300"},null,-1),e("div",{class:"absolute inset-0 bg-gradient-to-r from-white/5 to-transparent"},null,-1)]),6))),128))]),e("div",ce,[(i(!0),r(_,null,h(o.style_distribution,(v,u)=>(i(),r("div",{key:u,class:"flex items-center gap-1.5 group/indicator"},[e("div",{class:f(["w-2 h-2 rounded-full transition-all duration-300 group-hover/indicator:scale-125 group-hover/indicator:ring-2",[n(u),"ring-1 ring-white/10"]])},null,2),e("span",ue,p(u)+": "+p((v*100).toFixed(0))+"% ",1)]))),128))])]),A(ae,{"article-type":o.article_type,sentiments:o.sentiments},null,8,["article-type","sentiments"])],4))),128))]),_:1})])])]))}}),me=C(pe,[["__scopeId","data-v-6adf79d3"]]),ge={class:"w-full max-w-2xl mx-auto rounded-xl p-4 sm:p-6 animate-fade-in"},be={class:"relative rounded-lg group"},_e={class:"mt-4 flex flex-col sm:flex-row gap-3 sm:gap-4"},fe=["disabled"],ve={class:"relative z-10 flex items-center justify-center gap-2"},xe={key:0,class:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},he={key:1,class:"w-4 h-4 sm:w-5 sm:h-5 relative"},ye={key:0,class:"mt-6 p-4 sm:p-6 rounded-xl bg-slate-900/95 backdrop-blur-sm border border-white/10 shadow-[inset_0_2px_4px_0_rgba(0,0,0,0.3),inset_0_0_0_1px_rgba(255,255,255,0.1)] text-white space-y-3 sm:space-y-4 animate-slide-up relative"},we={class:"animate-fade-in p-3 sm:p-4 bg-slate-800/60 rounded-lg border border-white/10 shadow-[inset_0_1px_2px_0_rgba(0,0,0,0.2)]",style:{"animation-delay":"100ms"}},ke={class:"text-sm sm:text-base"},Ae={class:"animate-fade-in p-3 sm:p-4 bg-slate-800/60 rounded-lg border border-white/10 shadow-[inset_0_1px_2px_0_rgba(0,0,0,0.2)]",style:{"animation-delay":"200ms"}},$e={class:"text-sm sm:text-base"},je={class:"animate-fade-in p-3 sm:p-4 bg-slate-800/60 rounded-lg border border-white/10 shadow-[inset_0_1px_2px_0_rgba(0,0,0,0.2)]",style:{"animation-delay":"300ms"}},Ee={class:"text-sm sm:text-base"},ze={class:"animate-fade-in p-3 sm:p-4 bg-slate-800/60 rounded-lg border border-white/10 shadow-[inset_0_1px_2px_0_rgba(0,0,0,0.2)]",style:{"animation-delay":"400ms"}},Te={class:"text-sm sm:text-base"},Ce=j({__name:"AnalysisForm",emits:["analyze"],setup(b,{emit:c}){const l=m(""),n=m(!1),a=m(0),s=m(""),o=m(""),g=m(""),v=m({analysis_explanation:{factual_accuracy:{score:0,key_indicators:"",examples_from_text:"",weight_of_factors:"",comparison_with_similar_content:""},bias:{classification:"",language_patterns:"",examples_of_bias:"",context_and_implications:"",effect_on_message:""},emotional_tone:{classification:"",emotional_language_patterns:"",examples_of_emotional_language:"",impact_on_message:"",effect_on_credibility:""},recommendation:{text:"",key_factors:"",specific_concerns:"",relation_to_other_classifications:""}}}),u=m({}),E=c;async function T(){if(l.value.trim()){if(l.value.length>4e3){alert("The text is too long. Please limit it to 4000 characters.");return}n.value=!0,v.value={analysis_explanation:{factual_accuracy:{score:0,key_indicators:"",examples_from_text:"",weight_of_factors:"",comparison_with_similar_content:""},bias:{classification:"",language_patterns:"",examples_of_bias:"",context_and_implications:"",effect_on_message:""},emotional_tone:{classification:"",emotional_language_patterns:"",examples_of_emotional_language:"",impact_on_message:"",effect_on_credibility:""},recommendation:{text:"",key_factors:"",specific_concerns:"",relation_to_other_classifications:""}}};try{console.log("Making API request to:",$("ANALYZE"));const d=await fetch($("ANALYZE"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({text:l.value.trim()})});if(!d.ok){const y=await d.json().catch(()=>null);throw console.error("Analysis error response:",y),new Error((y==null?void 0:y.detail)||"Analysis failed")}const t=await d.json();if(console.log("Basic analysis result:",t),t.factual_accuracy===void 0||t.bias===void 0||t.emotional_tone===void 0||t.recommendation===void 0||t.article_type===void 0||t.sentiments===void 0||t.analysis_explanation===void 0)throw console.error("Missing required fields in response:",t),new Error("Invalid response format: missing required fields");a.value=t.factual_accuracy,s.value=t.bias,o.value=t.emotional_tone,g.value=t.recommendation;const x=[{text:l.value.trim(),bias:t.bias,style_distribution:t.article_type||{objective:t.factual_accuracy/100,subjective:1-t.factual_accuracy/100,speculative:0,emotive:0,clickbait:0},article_type:t.article_type||{objective:t.factual_accuracy/100,subjective:1-t.factual_accuracy/100,speculative:0,emotive:0,clickbait:0},sentiments:t.sentiments||{joy:0,trust:0,fear:0,surprise:0,sadness:0,disgust:0,anger:0,anticipation:0}}];console.log("Generated blocks:",x);const z={fake_news_percentage:t.factual_accuracy,bias:t.bias,emotional_tone:t.emotional_tone,recommendation:t.recommendation,analysis_explanation:JSON.stringify(t)};u.value={blocks:x},E("analyze",l.value,z)}catch(d){console.error("Error analyzing text:",d),alert(d instanceof Error?d.message:"An error occurred while analyzing the text. Please try again.")}finally{n.value=!1}}}function N(){l.value='Amid rising tensions, government officials warn that the recent surge in immigration poses a "serious threat to national stability." Meanwhile, independent reports suggest the influx has had a neutral or even positive economic impact. A viral video showing a confrontation at the border has sparked outrage online, though fact-checkers later revealed it was taken out of context. Experts urge the public to avoid jumping to conclusions and await verified information.',T()}return L(()=>u.value,d=>{var t;console.log("Analysis blocks updated:",{has_blocks:"blocks"in d,blocks_count:((t=d.blocks)==null?void 0:t.length)||0,blocks_data:d.blocks})},{deep:!0}),P(()=>{var d;console.log("AnalysisForm mounted, current analysis state:",{has_blocks:"blocks"in u.value,blocks_count:((d=u.value.blocks)==null?void 0:d.length)||0,blocks_data:u.value.blocks})}),(d,t)=>{var x;return i(),r("div",ge,[e("div",be,[t[1]||(t[1]=e("div",{class:"absolute -inset-[1px] rounded-lg bg-gradient-to-r from-cyan-400 to-blue-400 z-0 transition-all duration-300 group-hover:opacity-80"},null,-1)),V(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=z=>l.value=z),placeholder:"Write or paste your text here (4000 characters max)...",class:"w-full h-32 sm:h-40 p-3 sm:p-4 rounded-lg glass-input text-white placeholder-blue-200/50 relative z-10 bg-slate-900 transition-all duration-300 focus:ring-2 focus:ring-blue-500/50 focus:shadow-lg text-sm sm:text-base"},null,512),[[O,l.value]])]),e("div",{class:f(["mt-1 text-xs sm:text-sm text-right transition-colors duration-300",l.value.length>4e3?"text-red-400":"text-blue-200/70"])},p(l.value.length)+" / 4000 ",3),e("div",_e,[e("button",{onClick:T,disabled:!l.value.trim()||n.value,class:"w-full sm:flex-1 relative group overflow-hidden bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg transition-all duration-300 hover:shadow-lg hover:shadow-slate-500/25 disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:shadow-none text-sm sm:text-base font-medium shadow-[inset_0_2px_4px_rgba(0,0,0,0.3),inset_0_0_0_1px_rgba(255,255,255,0.1)]"},[t[4]||(t[4]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-700 via-slate-600 to-slate-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),t[5]||(t[5]=e("div",{class:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent"},null,-1)),e("span",ve,[n.value?(i(),r("div",he,t[3]||(t[3]=[e("div",{class:"absolute inset-0 border-2 border-white/20 rounded-full"},null,-1),e("div",{class:"absolute inset-0 border-2 border-t-white rounded-full animate-spin"},null,-1),e("div",{class:"absolute inset-0 flex items-center justify-center"},[e("div",{class:"w-1.5 h-1.5 bg-white rounded-full"})],-1)]))):(i(),r("svg",xe,t[2]||(t[2]=[e("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)]))),D(" "+p(n.value?"Analyzing...":"Analyze Text"),1)])],8,fe),e("button",{onClick:N,class:"w-full sm:w-auto relative group overflow-hidden bg-slate-900/80 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg transition-all duration-300 hover:shadow-lg hover:shadow-slate-500/25 text-sm sm:text-base font-medium border border-slate-700/50 shadow-[inset_0_1px_2px_rgba(0,0,0,0.2)]"},t[6]||(t[6]=[S('<div class="absolute inset-0 bg-gradient-to-r from-slate-800/50 via-slate-700/50 to-slate-800/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-6e67a5e1></div><div class="absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent" data-v-6e67a5e1></div><span class="relative z-10 flex items-center justify-center gap-2" data-v-6e67a5e1><svg class="w-4 h-4 sm:w-5 sm:h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6e67a5e1><path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-6e67a5e1></path></svg> See Example </span>',3)]))]),a.value!==0||s.value||o.value||g.value?(i(),r("div",ye,[e("div",we,[t[7]||(t[7]=e("span",{class:"font-semibold text-blue-300 text-sm sm:text-base"},"Factual Accuracy:",-1)),e("span",ke,p(a.value)+"%",1)]),e("div",Ae,[t[8]||(t[8]=e("span",{class:"font-semibold text-blue-300 text-sm sm:text-base"},"Political Bias:",-1)),e("span",$e,p(s.value),1)]),e("div",je,[t[9]||(t[9]=e("span",{class:"font-semibold text-blue-300 text-sm sm:text-base"},"Emotional Language:",-1)),e("span",Ee,p(o.value),1)]),e("div",ze,[t[10]||(t[10]=e("span",{class:"font-semibold text-blue-300 text-sm sm:text-base"},"Reader Recommendation:",-1)),e("span",Te,p(g.value),1)])])):w("",!0),(x=u.value)!=null&&x.blocks?(i(),M(me,{key:1,blocks:u.value.blocks,class:"animate-slide-up"},null,8,["blocks"])):w("",!0)])}}}),Se=C(Ce,[["__scopeId","data-v-6e67a5e1"]]);console.log("Using backend: https://truthlens-backend-production.up.railway.app");function Ne(){const b=m(null),c=m(!0);return{result:b,analyzeContent:async n=>{if(!c.value&&(c.value=await H(),!c.value))throw new Error("El servidor no está disponible. Por favor, intenta más tarde.");console.log("Sending analysis request to:",$("ANALYZE"));const a=await fetch($("ANALYZE"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n})});if(!a.ok){const g=await a.json().catch(()=>null);throw console.error("Analysis error:",{status:a.status,statusText:a.statusText,errorData:g}),a.status===404?new Error("El endpoint de análisis no está disponible. Por favor, verifica la configuración del servidor."):a.status===503?(c.value=!1,new Error("El servidor está temporalmente no disponible. Por favor, intenta más tarde.")):new Error(`Error en el análisis: ${a.status} ${a.statusText}`)}const s=await a.json();console.log("Analysis response:",s);const o={factual_accuracy:s.factual_accuracy,bias:s.bias,emotional_tone:s.emotional_tone,recommendation:s.recommendation,analysis_explanation:JSON.stringify(s)};return b.value=o,o},isApiHealthy:c}}const Be={class:"pt-[140px] pb-4 px-4 text-white relative mb-3"},Pe=j({__name:"HomeView",setup(b){const{result:c,analyzeContent:l}=Ne(),n=m("");async function a(s){n.value=s,c.value=await l(s)}return(s,o)=>(i(),r(_,null,[e("div",Be,[e("div",null,[o[0]||(o[0]=e("div",{class:"text-center mb-6"},[e("h1",{class:"font-display text-6xl font-bold mb-6 relative"},[e("span",{class:"bg-gradient-to-r from-cyan-300 via-blue-500 to-cyan-300 bg-clip-text text-transparent bg-[length:200%_200%] animate-gradient"},"TruthLens")]),e("p",{class:"text-lg text-blue-200/80 font-display tracking-wide"},"Analyze news articles for bias and credibility")],-1)),A(Se,{class:"animate-fadeInUp",onAnalyze:a})])]),o[1]||(o[1]=S('<div class="mt-12 max-w-2xl mx-auto"><div class="bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900 rounded-2xl shadow-xl border border-cyan-400/20 p-8 mb-8 flex flex-col items-start"><div class="flex items-center mb-4"><svg class="w-7 h-7 text-cyan-300 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 3v6m0 6v6m9-9h-6m-6 0H3m13.07-6.93l-4.24 4.24m0 0l-4.24-4.24m8.48 8.48l-4.24 4.24m0 0l-4.24-4.24" stroke-linecap="round"></path></svg><h2 class="text-2xl font-bold text-white">Text Analysis</h2></div><p class="text-slate-200 mb-3">Understand how media content shapes perception. Drop any news article or written statement and TruthLens will detect:</p><ul class="list-disc list-inside text-slate-300 mb-3"><li>Emotional language and sentiment</li><li>Ideological bias and manipulative framing</li><li>Source credibility signals</li><li>Factual consistency indicators</li></ul><p class="text-slate-200">You&#39;ll receive a detailed bias score, credibility assessment, and suggestions to verify or contrast the information.</p></div></div>',1)),A(U,{"article-text":n.value,"analysis-result":I(c)},null,8,["article-text","analysis-result"])],64))}});export{Pe as default};
